# CH01 并发世界
## 基本概念
- 并发 
- 硬件并发
- 上下文切换概念

## 两种并发方式
- 多进程并发:
  - 文件管道信号套接字等通信机制, 额外内存保护
  - 通信复杂, 速度慢, 开销大, 启动慢
- 多线程并发:
  - 共享地址空间, 全局变量, 指针, 引用共享
  - 共享内存带来隐患
 
## 并行与并发
- 并行(parallel)强调用硬件资源提升性能
- 并发(concurrency)强调分离关注点和性能提升
  - 分离关注点: 归类代码, 解耦方便维护
  - 性能提升: 任务并行, 数据并行(尴尬并行, 天然并行, 方便并行)

## 采取并发的考量
- 是否针对关键部分采取并发
- 代码维护成本是否过高
- 是否出现资源耗尽
- 过多线程是否会降低整体性能
- 单一线程运行时间是否少于启动时间

# CH02 线程管控
- thread 销毁前需要确定是否分离或汇合, 否则会调用 std::terminate 结束整个程序
- 新线程注意不能引用主线程的可能已经销毁的局部变量
  - smart-pointer
  - copy
  - join
- detach 后的线程归属权与控制权交由 C++ runtime library 处理
- 参数传递过程中注意参数的悬空指针问题, 引用的转发和成员函数等问题
- thread 遵循 unique_ptr 的转移操作, 考虑 jthread 在销毁时自动 join
- parallel_accumulate 算法
- get_id 获取线程 id, 可用于关联容器键值

# CH03 
- 条件竞争, 不变量
- 防止恶性竞争方法: 无锁, 事务, 互斥
- 